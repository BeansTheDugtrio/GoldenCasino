<html>
<head>
</head>
<body>
  <p id=test>--</p>
  <p id=test2>--</p>
  <p id=test3>--</p>
  <img id="card1" style="width:100px">
  <button type="button" id="hit" onclick="hit()">Hit</button>
  <button type="button" id="double" onclick="doubleDown()">Double</button>
  <button type="button" id="stand" onclick="stand()">Stand</button>
  
</body>
 <script>
  var suits = ['Hearts', 'Diamonds', 'Spades', 'Clubs'];
  var ranks = ['Ace', 2,3,4,5,6,7,8,9,10,'Jack','Queen','King'];
  var deck = [];
  var player = [];
  var opponent = [];
  var turn = "player";
  
  function createDeck(num) {
    for (; num > 0; num--) {
      for (s = 0; s < suits.length; s++) {
        for (r = 0; r < ranks.length; r++) {
          var newCard = [suits[s], ranks[r]];
          deck.push(newCard);
        }
      }
    }
  }
   function shuffle(d) {
    var currentIndex = d.length, randomIndex, tempValue;
    while(currentIndex !== 0) {
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex -= 1;
      tempValue = d[currentIndex];
      d[currentIndex] = d[randomIndex];
      d[randomIndex] = tempValue;
    }
  }
   function deal(num, hand) {
    for(; num !== 0; num--){
      hand.push(deck[0]);
      deck.splice(0,1)
    }
  }
  
  function calculate(hand) {
	var tempHand = [];
	var aCount = 0;
	for(q = 0; q < hand.length; q++) {
		var curCard = (hand[q])[1];
		if (typeof curCard === "string") {
			if (curCard === "Ace") {
			aCount += 1;
			}
			else {
			tempHand.push(10);
			}
		} else {
		tempHand.push(curCard);
		}
	}
	var handpoints = 0;
	for(q = 0; q < tempHand.length; q++) {
		handpoints += tempHand[q];
	}
	for (q = 0; q < aCount; q++) {
		if (handpoints > 10) {
			handpoints += 1;
		} else {
			handpoints += 11;
		}
	}	
	return handpoints;
}
	
function isSoft(hand) {
	var tempHand = [];
	var aCount = 0;
	var soft = false;
	for(q = 0; q < hand.length; q++) {
		var curCard = (hand[q])[1];
		if (typeof curCard === "string") {
			if (curCard === "Ace") {
			aCount += 1;
			}
			else {
			tempHand.push(10);
			}
		} else {
		tempHand.push(curCard);
		}
	}
	var handpoints = 0;
	for(q = 0; q < tempHand.length; q++) {
		handpoints += tempHand[q];
	}
	for (q = 0; q < aCount; q++) {
		if (handpoints > 10) {
			handpoints += 1;
		} else {
			handpoints += 11;
			soft = true;
		}
	}	
	return soft;
}

function toggleView(element) {
	var x = document.getElementById(element);
	if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
}

function lockButton(element) {
	document.getElementById(element).disabled = true;
}

function enableButton(element) {
	document.getElementById(element).disabled = false;
}

function gameStart() {
	deal(2, player);
	deal(2, opponent);
	document.getElementById("test2").innerHTML = calculate(player);
	if (calcuate(player) == 21) {
		if (calcuate(opponent) == 21) {
			document.getElementById("test3").innerHTML = "Both BJ";
		} else {
			document.getElementById("test3").innerHTML = "Player BJ";
		}
	} else if (calcuate(opponent) == 21) {
		document.getElementById("test3").innerHTML = "House BJ";
	}
	enableButton("hit");
	enableButton("double");
	enableButton("stand");
}

function hit() {
	lockButton("hit");
	lockButton("double");
	lockButton("stand");
	deal(1, player);
	document.getElementById("test2").innerHTML = calculate(player);
	if(calcuate(player) > 21) {
		bust();
	} else if (calcuate(player) == 21) {
		document.getElementById("test3").innerHTML = "21 - Forced Stand";
	} else {
		document.getElementById("test3").innerHTML ="Hit"
		enableButton("hit");
		enableButton("double");
		enableButton("stand");
	}
	document.getElementById("test3").innerHTML = "Hit"
}

function doubleDown () {
	//bet *= 2;
	deal(1, player);
	document.getElementById("test2").innerHTML = calculate(player);
	lockButton("hit");
	lockButton("double");
	lockButton("stand");
	if(calcuate(player) > 21) {
		bust();
	} else {
		document.getElementById("test3").innerHTML = "Doubled - Forced Stand";
	}
}

function stand () {
	lockButton("hit");
	lockButton("double");
	lockButton("stand");
	turn = "dealer";
	document.getElementById("test3").innerHTML = "Stand";
}

function bust() {
	document.getElementById("test3").innerHTML = "You have busted";
}
 
  createDeck(2)
  shuffle(deck);
  gameStart();
  document.getElementById("test2").innerHTML = calculate(player);
  document.getElementById("test3").innerHTML = isSoft(player);
  	
	
	

  
  document.getElementById("test").innerHTML = player;
  var cardImage = "./Cards/"+(player[0])[0]+"/"+(player[0])[1]+".png";
  
  document.getElementById('card1').src=cardImage;
  </script>
</html>
